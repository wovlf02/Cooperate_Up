# ğŸ–¥ï¸ ìº˜ë¦°ë” í™”ë©´

## ê°œìš”

ìŠ¤í„°ë”” ì¼ì • ê´€ë¦¬ í™”ë©´ì…ë‹ˆë‹¤. ìº˜ë¦°ë” ë·°ì™€ ë¦¬ìŠ¤íŠ¸ ë·°ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

**íŒŒì¼ ìœ„ì¹˜**: `src/app/my-studies/[studyId]/calendar/page.jsx`

---

## í™”ë©´ êµ¬ì„±

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â† ë‚´ ìŠ¤í„°ë”” ëª©ë¡                                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ğŸ“š ìŠ¤í„°ë”” ì´ë¦„                     ğŸ‘‘ OWNER           â”‚  â”‚
â”‚  â”‚ ğŸ‘¥ 5/10ëª…                                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ëŒ€ì‹œë³´ë“œ | ì±„íŒ… | ê³µì§€ | [ì¼ì •] | íŒŒì¼ | ë©¤ë²„ | ì„¤ì •        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“… ì¼ì •       [ğŸ“… ìº˜ë¦°ë”] [ğŸ“‹ ë¦¬ìŠ¤íŠ¸]     [+ ì¼ì • ì¶”ê°€]     â”‚
â”‚                                                             â”‚
â”‚  [ì›”] [ì£¼] [ì¼]        < 2024ë…„ 12ì›” >       [ì˜¤ëŠ˜]         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  ì¼   ì›”   í™”   ìˆ˜   ëª©   ê¸ˆ   í†                       â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  1    2    3    4    5    6    7                      â”‚  â”‚
â”‚  â”‚            ğŸ”µ                                         â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚  8    9   10   11   12   13   14                      â”‚  â”‚
â”‚  â”‚                          ğŸ”´                           â”‚  â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚  â”‚ 15   16   17   18   19   20   21                      â”‚  â”‚
â”‚  â”‚ ğŸŸ¢                                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚  â”‚ ğŸ“Š ì˜¤ëŠ˜ ì¼ì •    â”‚                                        â”‚
â”‚  â”‚ ğŸ”µ ìŠ¤í„°ë”” ëª¨ì„  â”‚                                        â”‚
â”‚  â”‚    14:00-16:00  â”‚                                        â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                        â”‚
â”‚  â”‚ ğŸ“Š í†µê³„        â”‚                                        â”‚
â”‚  â”‚ ì´ë²ˆ ë‹¬: 5ê°œ   â”‚                                        â”‚
â”‚  â”‚ ë‹¤ìŒ ì¼ì •: 3ì¼ â”‚                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë·° íƒ€ì…

### 1. ìº˜ë¦°ë” ë·°

**ì›”ê°„ ë·° (month)**
- ë‹¬ë ¥ í˜•íƒœë¡œ ì „ì²´ ì›” í‘œì‹œ
- ê° ë‚ ì§œì— ì¼ì • ìƒ‰ìƒ í‘œì‹œ
- í´ë¦­ ì‹œ í•´ë‹¹ ì¼ì • ìƒì„¸ ëª¨ë‹¬

**ì£¼ê°„ ë·° (week)**
- ì¼ìš”ì¼~í† ìš”ì¼ 7ì¼ í‘œì‹œ
- ì‹œê°„ëŒ€ë³„ ê·¸ë¦¬ë“œ (24ì‹œê°„)
- ì¼ì • ë¸”ë¡ìœ¼ë¡œ ì‹œê°í™”

**ì¼ê°„ ë·° (day)**
- í•˜ë£¨ 24ì‹œê°„ íƒ€ì„ë¼ì¸
- ì¼ì • ë¸”ë¡ìœ¼ë¡œ ì‹œê°í™”

### 2. ë¦¬ìŠ¤íŠ¸ ë·°

- ë‚ ì§œë³„ ê·¸ë£¹í™”ëœ ëª©ë¡
- ì¼ì • ì œëª©, ì‹œê°„, ì¥ì†Œ í‘œì‹œ
- ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼

---

## ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```jsx
<MyStudyCalendarPage>
  â”œâ”€â”€ Header
  â”‚   â”œâ”€â”€ BackButton
  â”‚   â””â”€â”€ StudyHeader
  â”œâ”€â”€ StudyTabs
  â”œâ”€â”€ MainContent
  â”‚   â”œâ”€â”€ CalendarSection
  â”‚   â”‚   â”œâ”€â”€ CalendarHeader (ì œëª©, ë·° í† ê¸€, ì¼ì • ì¶”ê°€)
  â”‚   â”‚   â”œâ”€â”€ ControlSection (ë·° ëª¨ë“œ, ë„¤ë¹„ê²Œì´ì…˜)
  â”‚   â”‚   â””â”€â”€ CalendarView
  â”‚   â”‚       â”œâ”€â”€ MonthView (ì›”ê°„ ìº˜ë¦°ë”)
  â”‚   â”‚       â”œâ”€â”€ WeekView (ì£¼ê°„ ê·¸ë¦¬ë“œ)
  â”‚   â”‚       â”œâ”€â”€ DayView (ì¼ê°„ íƒ€ì„ë¼ì¸)
  â”‚   â”‚       â””â”€â”€ ListView (ë¦¬ìŠ¤íŠ¸)
  â”‚   â””â”€â”€ Sidebar
  â”‚       â”œâ”€â”€ TodayEvents (ì˜¤ëŠ˜ ì¼ì •)
  â”‚       â””â”€â”€ Statistics (í†µê³„)
  â”œâ”€â”€ CreateModal (ì¼ì • ì¶”ê°€ ëª¨ë‹¬)
  â””â”€â”€ DetailModal (ì¼ì • ìƒì„¸/ìˆ˜ì • ëª¨ë‹¬)
</MyStudyCalendarPage>
```

---

## ìƒíƒœ ê´€ë¦¬

```jsx
const [viewType, setViewType] = useState('calendar');  // 'calendar' | 'list'
const [viewMode, setViewMode] = useState('month');     // 'month' | 'week' | 'day'
const [currentDate, setCurrentDate] = useState(new Date());
const [showModal, setShowModal] = useState(false);
const [showDetailModal, setShowDetailModal] = useState(false);
const [selectedEvent, setSelectedEvent] = useState(null);
const [isEditingDetail, setIsEditingDetail] = useState(false);
const [formData, setFormData] = useState({
  title: '',
  date: new Date().toISOString().split('T')[0],
  startTime: '09:00',
  endTime: '10:00',
  location: '',
  color: '#6366F1'
});
```

---

## ì£¼ìš” ê¸°ëŠ¥

### 1. ì¼ì • ìƒì„±

```jsx
const handleSubmit = async (e) => {
  e.preventDefault();

  if (!formData.title.trim()) {
    alert('ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    return;
  }

  try {
    await createEventMutation.mutateAsync({
      studyId,
      data: formData
    });
    setShowModal(false);
    alert('ì¼ì •ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    alert('ì¼ì • ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
  }
};
```

### 2. ì¼ì • ìˆ˜ì •

```jsx
const handleSaveEdit = async () => {
  if (!editFormData.title.trim()) {
    alert('ì¼ì • ì œëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
    return;
  }

  try {
    await updateEventMutation.mutateAsync({
      studyId,
      eventId: selectedEvent.id,
      data: editFormData
    });
    setIsEditingDetail(false);
    handleCloseDetailModal();
    alert('ì¼ì •ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
  } catch (error) {
    alert('ì¼ì • ìˆ˜ì • ì‹¤íŒ¨: ' + error.message);
  }
};
```

### 3. ì¼ì • ì‚­ì œ

```jsx
const handleDeleteEvent = async (eventId) => {
  if (!confirm('ì¼ì •ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;

  try {
    await deleteEventMutation.mutateAsync({ studyId, eventId });
  } catch (error) {
    alert('ì¼ì • ì‚­ì œ ì‹¤íŒ¨: ' + error.message);
  }
};
```

### 4. ê¶Œí•œ í™•ì¸

```jsx
const canDeleteEvent = (event) => {
  if (!currentUser || !study) return false;
  return event.createdById === currentUser.id || 
         ['OWNER', 'ADMIN'].includes(study.myRole);
};
```

---

## ë‚ ì§œ/ì‹œê°„ ìœ í‹¸ë¦¬í‹°

### ì›” ì¼ìˆ˜ ê³„ì‚°

```jsx
const getDaysInMonth = (date) => {
  const year = date.getFullYear();
  const month = date.getMonth();
  const firstDay = new Date(year, month, 1);
  const lastDay = new Date(year, month + 1, 0);
  const daysInMonth = lastDay.getDate();
  const startDayOfWeek = firstDay.getDay();

  const days = [];
  for (let i = 0; i < startDayOfWeek; i++) {
    days.push(null);  // ë¹ˆ ì¹¸
  }
  for (let i = 1; i <= daysInMonth; i++) {
    days.push(i);
  }
  return days;
};
```

### ì˜¤ëŠ˜ ì—¬ë¶€ í™•ì¸

```jsx
const isToday = (day) => {
  const today = new Date();
  return (
    day === today.getDate() &&
    currentDate.getMonth() === today.getMonth() &&
    currentDate.getFullYear() === today.getFullYear()
  );
};
```

### í•´ë‹¹ ë‚ ì§œ ì¼ì • ì¡°íšŒ

```jsx
const getEventsForDay = (day) => {
  const dateStr = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
  return events.filter(event => {
    const eventDate = new Date(event.date);
    const eventDateStr = `${eventDate.getFullYear()}-${String(eventDate.getMonth() + 1).padStart(2, '0')}-${String(eventDate.getDate()).padStart(2, '0')}`;
    return eventDateStr === dateStr;
  });
};
```

### ì£¼ê°„ ë·° ë‚ ì§œ ê³„ì‚°

```jsx
const getWeekDays = (date) => {
  const current = new Date(date);
  const first = current.getDate() - current.getDay(); // ì¼ìš”ì¼

  return Array.from({ length: 7 }, (_, i) => {
    const day = new Date(current.setDate(first + i));
    return new Date(day);
  });
};
```

### ì¼ì • ìœ„ì¹˜ ê³„ì‚° (ì‹œê°„ëŒ€ ê·¸ë¦¬ë“œ)

```jsx
const getEventPosition = (event) => {
  const [startHour, startMinute] = event.startTime.split(':').map(Number);
  const [endHour, endMinute] = event.endTime.split(':').map(Number);

  const startMinutes = startHour * 60 + startMinute;
  const endMinutes = endHour * 60 + endMinute;
  const duration = endMinutes - startMinutes;

  return {
    top: `${(startMinutes / 60) * 60}px`,    // 60px per hour
    height: `${(duration / 60) * 60}px`
  };
};
```

---

## ë„¤ë¹„ê²Œì´ì…˜

### ì›” ì´ë™

```jsx
const goToPreviousMonth = () => {
  setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1));
};

const goToNextMonth = () => {
  setCurrentDate(new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 1));
};
```

### ì£¼ ì´ë™

```jsx
const goToPreviousWeek = () => {
  const newDate = new Date(currentDate);
  newDate.setDate(newDate.getDate() - 7);
  setCurrentDate(newDate);
};

const goToNextWeek = () => {
  const newDate = new Date(currentDate);
  newDate.setDate(newDate.getDate() + 7);
  setCurrentDate(newDate);
};
```

### ì¼ ì´ë™

```jsx
const goToPreviousDay = () => {
  const newDate = new Date(currentDate);
  newDate.setDate(newDate.getDate() - 1);
  setCurrentDate(newDate);
};

const goToNextDay = () => {
  const newDate = new Date(currentDate);
  newDate.setDate(newDate.getDate() + 1);
  setCurrentDate(newDate);
};
```

### ì˜¤ëŠ˜ë¡œ ì´ë™

```jsx
const goToToday = () => {
  setCurrentDate(new Date());
};
```

---

## API Hooks

```jsx
const { data: studyData, isLoading: studyLoading } = useStudy(studyId);

// í˜„ì¬ ì›” ê¸°ì¤€ ì¡°íšŒ
const month = `${currentDate.getFullYear()}-${String(currentDate.getMonth() + 1).padStart(2, '0')}`;
const { data: eventsData, isLoading: eventsLoading } = useEvents(studyId, { month });

const createEventMutation = useCreateEvent();
const updateEventMutation = useUpdateEvent();
const deleteEventMutation = useDeleteEvent();
```

---

## ëª¨ë‹¬

### ì¼ì • ì¶”ê°€ ëª¨ë‹¬

```jsx
<div className={styles.modal}>
  <form onSubmit={handleSubmit}>
    <input name="title" value={formData.title} onChange={handleInputChange} />
    <input type="date" name="date" value={formData.date} onChange={handleInputChange} />
    <input type="time" name="startTime" value={formData.startTime} onChange={handleInputChange} />
    <input type="time" name="endTime" value={formData.endTime} onChange={handleInputChange} />
    <input name="location" value={formData.location} onChange={handleInputChange} />
    <input type="color" name="color" value={formData.color} onChange={handleInputChange} />
    <button type="submit">ì¶”ê°€</button>
  </form>
</div>
```

### ì¼ì • ìƒì„¸/ìˆ˜ì • ëª¨ë‹¬

```jsx
<div className={styles.detailModal}>
  {isEditingDetail ? (
    // ìˆ˜ì • í¼
    <form>
      <input name="title" value={editFormData.title} onChange={handleEditInputChange} />
      ...
      <button onClick={handleSaveEdit}>ì €ì¥</button>
      <button onClick={handleCancelEditing}>ì·¨ì†Œ</button>
    </form>
  ) : (
    // ìƒì„¸ ë·°
    <div>
      <h3>{selectedEvent.title}</h3>
      <p>{selectedEvent.date} {selectedEvent.startTime}-{selectedEvent.endTime}</p>
      <p>{selectedEvent.location}</p>
      <button onClick={handleStartEditing}>ìˆ˜ì •</button>
      <button onClick={() => handleDeleteEvent(selectedEvent.id)}>ì‚­ì œ</button>
    </div>
  )}
</div>
```

---

## ê´€ë ¨ ë¬¸ì„œ

- [README](./README.md)
- [API](./api.md)
- [ì˜ˆì™¸](./exceptions.md)

