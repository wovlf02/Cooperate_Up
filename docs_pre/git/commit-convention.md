# Git 커밋 메시지 규칙

> **⚠️ 중요: Private 저장소 정책**
> 
> 이 저장소는 **Private 상태로 유지**됩니다.
> - ✅ 환경 변수 파일(.env) 포함
> - ✅ 설정 파일 포함
> - ✅ 민감한 정보 포함 가능
> - ⚠️ **절대 Public으로 전환하지 말 것**
> - ⚠️ Public 전환 필요 시 반드시 .env 파일 및 민감 정보 제거 후 진행

---

## 📝 커밋 메시지 구조

```
<타입>(<범위>): <제목>

<본문>

<푸터>
```

### 기본 형식
- 첫 줄은 **50자 이내**로 제한
- 제목과 본문은 **빈 줄**로 구분
- 본문은 **72자**마다 줄바꿈
- 제목은 **명령문**으로 작성 (예: "추가하다" ❌ / "추가" ✅)

---

## 🏷️ 타입 (Type)

커밋의 성격을 나타내는 필수 항목입니다.

| 타입 | 설명 | 예시 |
|------|------|------|
| `feat` | 새로운 기능 추가 | `feat(auth): 소셜 로그인 기능 추가` |
| `fix` | 버그 수정 | `fix(api): 사용자 조회 API 오류 수정` |
| `docs` | 문서 변경 | `docs(readme): 설치 가이드 업데이트` |
| `style` | 코드 포맷팅, 세미콜론 누락 등 (기능 변경 없음) | `style(css): 들여쓰기 수정` |
| `refactor` | 코드 리팩토링 (기능 변경 없음) | `refactor(auth): 인증 로직 개선` |
| `test` | 테스트 코드 추가/수정 | `test(user): 회원가입 테스트 추가` |
| `chore` | 빌드, 패키지 매니저 설정 등 | `chore(deps): React 18로 업그레이드` |
| `perf` | 성능 개선 | `perf(api): 쿼리 최적화` |
| `ci` | CI/CD 설정 변경 | `ci(github): 자동 배포 워크플로우 추가` |
| `build` | 빌드 시스템 변경 | `build(webpack): 번들 설정 수정` |
| `revert` | 커밋 되돌리기 | `revert: feat(auth) 커밋 되돌림` |

---

## 🎯 범위 (Scope)

커밋이 영향을 미치는 부분을 명시합니다. (선택 사항)

### 예시
- `auth` - 인증/권한
- `user` - 사용자 관리
- `study` - 스터디 관리
- `api` - API
- `ui` - UI/UX
- `db` - 데이터베이스
- `config` - 설정 파일

---

## 📄 제목 (Subject)

### 작성 규칙
1. **명령문 사용**: "추가하다", "수정하다" ❌ → "추가", "수정" ✅
2. **첫 글자는 대문자** (한글의 경우 해당 없음)
3. **마침표 사용 안 함**
4. **50자 이내**로 작성

### 좋은 예시 ✅
```
feat(auth): 이메일 인증 기능 추가
fix(study): 스터디 생성 시 날짜 검증 오류 수정
docs(api): REST API 문서 업데이트
```

### 나쁜 예시 ❌
```
로그인 기능을 추가했습니다.  (명령문 아님, 마침표 사용)
fix bug  (설명 부족)
feat(auth): 사용자가 로그인할 수 있도록 소셜 로그인 기능을 추가했습니다  (너무 김)
```

---

## 📋 본문 (Body)

### 작성 규칙
- **무엇을, 왜** 변경했는지 설명
- **어떻게**는 코드로 설명 (선택)
- 72자마다 줄바꿈

### 예시
```
feat(study): 실시간 화상 채팅 기능 추가

WebRTC를 활용한 화상 채팅 기능을 구현했습니다.
- Socket.io로 시그널링 서버 구성
- 최대 8명까지 동시 접속 지원
- 화면 공유 및 음소거 기능 포함

스터디 진행 시 원활한 소통을 위해 필요한 기능입니다.
```

---

## 🔖 푸터 (Footer)

### 이슈 참조
```
Closes #123
Resolves #456
Ref #789
```

### Breaking Changes (중대한 변경사항)
```
BREAKING CHANGE: API 응답 형식 변경

기존 { data: ... } 형식에서
{ success: true, data: ... } 형식으로 변경
```

---

## 📌 실전 예시

### 1. 간단한 기능 추가
```
feat(user): 프로필 이미지 업로드 기능 추가
```

### 2. 버그 수정
```
fix(auth): 로그아웃 시 세션 미삭제 오류 수정

로그아웃 후에도 세션이 유지되는 문제를 해결했습니다.
Redis에서 세션 데이터를 명시적으로 삭제하도록 수정했습니다.

Closes #234
```

### 3. 대규모 리팩토링
```
refactor(study): 스터디 관리 로직 분리

기존 단일 파일에 있던 스터디 관리 로직을 분리했습니다.
- controllers/: 요청 처리
- services/: 비즈니스 로직
- repositories/: 데이터 접근

코드 가독성과 유지보수성을 개선했습니다.
```

### 4. 문서 업데이트
```
docs(readme): 로컬 개발 환경 설정 가이드 추가

Docker Compose를 사용한 로컬 개발 환경 구성 방법을 추가했습니다.
초보 개발자도 쉽게 따라할 수 있도록 상세히 작성했습니다.
```

### 5. 성능 개선
```
perf(api): 스터디 목록 조회 쿼리 최적화

N+1 쿼리 문제를 해결하여 응답 속도를 70% 개선했습니다.
- Prisma include를 활용한 eager loading 적용
- 불필요한 필드 제거

기존: ~500ms → 개선 후: ~150ms
```

### 6. 중대한 변경
```
feat(api): 인증 방식 JWT로 변경

BREAKING CHANGE: 세션 기반 인증에서 JWT로 변경

기존 쿠키 기반 세션 인증을 JWT 토큰 방식으로 전환했습니다.
프론트엔드에서 Authorization 헤더에 Bearer 토큰을 포함해야 합니다.

마이그레이션 가이드: docs/migration/jwt-auth.md 참조

Ref #567
```

---

## ⚠️ 주의사항

### DO ✅
- 명확하고 간결하게 작성
- 한글 또는 영어로 일관성 있게 작성
- 타입을 정확하게 선택
- 이슈 번호 참조

### DON'T ❌
- 모호한 표현 사용 ("수정", "변경" 등)
- 불필요한 설명
- 여러 작업을 한 커밋에 포함
- 한 줄에 너무 많은 내용

---

## 🔄 커밋 되돌리기

```
revert: feat(auth): 소셜 로그인 기능 추가

이 기능으로 인해 기존 사용자 로그인에 문제가 발생하여 되돌립니다.

Reverts commit a1b2c3d4
```

---

## 📚 참고 자료

- [Conventional Commits](https://www.conventionalcommits.org/)
- [Angular Commit Guidelines](https://github.com/angular/angular/blob/master/CONTRIBUTING.md#commit)
- [Semantic Versioning](https://semver.org/)

---

## 💡 팁

1. **커밋은 논리적 단위로**: 한 커밋에는 하나의 논리적 변경사항만
2. **자주 커밋하기**: 작은 단위로 자주 커밋하면 관리가 쉬움
3. **커밋 전 리뷰**: `git diff`로 변경사항 확인
4. **의미 있는 커밋**: 코드 히스토리가 문서가 되도록 작성

