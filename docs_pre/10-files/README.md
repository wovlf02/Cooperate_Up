# ğŸ“ íŒŒì¼ ë„ë©”ì¸

## ê°œìš”

ìŠ¤í„°ë”” ë‚´ íŒŒì¼ ê³µìœ  ë° ê´€ë¦¬ ê¸°ëŠ¥ì…ë‹ˆë‹¤. íŒŒì¼ ì—…ë¡œë“œ, ë‹¤ìš´ë¡œë“œ, ì‚­ì œ, ë³´ì•ˆ ê²€ì¦ì„ ì œê³µí•©ë‹ˆë‹¤.

---

## ì£¼ìš” ê¸°ëŠ¥

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| íŒŒì¼ ì—…ë¡œë“œ | ë“œë˜ê·¸ ì•¤ ë“œë¡­, í´ë¦­ ì—…ë¡œë“œ |
| íŒŒì¼ ë‹¤ìš´ë¡œë“œ | ë‹¤ìš´ë¡œë“œ íšŸìˆ˜ ì¶”ì  |
| íŒŒì¼ ì‚­ì œ | ì—…ë¡œë”/ê´€ë¦¬ì ê¶Œí•œ |
| ë³´ì•ˆ ê²€ì¦ | MIME íƒ€ì…, ë§¤ì§ ë„˜ë²„, ì•…ì„± ì½”ë“œ íƒì§€ |
| ì €ì¥ ê³µê°„ | ìŠ¤í„°ë””ë‹¹ 1GB í• ë‹¹ |

---

## ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Client                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚           FilesPage (page.jsx)               â”‚  â”‚
â”‚  â”‚  - Drag & Drop Zone                          â”‚  â”‚
â”‚  â”‚  - File List Table                           â”‚  â”‚
â”‚  â”‚  - Filter Tabs (ì „ì²´/ë¬¸ì„œ/ì´ë¯¸ì§€/ì••ì¶•/ê¸°íƒ€)   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                        â”‚                           â”‚
â”‚                        â–¼                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚          useApi Hooks                        â”‚  â”‚
â”‚  â”‚  - useFiles()                                â”‚  â”‚
â”‚  â”‚  - useUploadFile()                           â”‚  â”‚
â”‚  â”‚  - useDeleteFile()                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Server                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚        /api/studies/[id]/files               â”‚  â”‚
â”‚  â”‚  - GET:  íŒŒì¼ ëª©ë¡ ì¡°íšŒ                       â”‚  â”‚
â”‚  â”‚  - POST: íŒŒì¼ ì—…ë¡œë“œ                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚    /api/studies/[id]/files/[fileId]          â”‚  â”‚
â”‚  â”‚  - DELETE: íŒŒì¼ ì‚­ì œ                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  /api/studies/[id]/files/[fileId]/download   â”‚  â”‚
â”‚  â”‚  - GET: íŒŒì¼ ë‹¤ìš´ë¡œë“œ                         â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  File System                       â”‚
â”‚  /public/uploads/{studyId}/{safeFilename}          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## íŒŒì¼ êµ¬ì¡°

```
coup/src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/studies/[id]/files/
â”‚   â”‚   â”œâ”€â”€ route.js              # GET(ëª©ë¡), POST(ì—…ë¡œë“œ)
â”‚   â”‚   â””â”€â”€ [fileId]/
â”‚   â”‚       â”œâ”€â”€ route.js          # DELETE(ì‚­ì œ)
â”‚   â”‚       â””â”€â”€ download/
â”‚   â”‚           â””â”€â”€ route.js      # GET(ë‹¤ìš´ë¡œë“œ)
â”‚   â””â”€â”€ my-studies/[studyId]/files/
â”‚       â”œâ”€â”€ page.jsx              # íŒŒì¼ ê´€ë¦¬ í™”ë©´
â”‚       â””â”€â”€ page.module.css       # ìŠ¤íƒ€ì¼
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ hooks/useApi.js           # useFiles, useUploadFile, useDeleteFile
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”œâ”€â”€ file-security-validator.js  # ë³´ì•ˆ ê²€ì¦
â”‚   â”‚   â””â”€â”€ xss-sanitizer.js      # íŒŒì¼ëª… ì •ì œ
â”‚   â”œâ”€â”€ exceptions/study/
â”‚   â”‚   â””â”€â”€ StudyException.js     # StudyFileException
â”‚   â””â”€â”€ logging/
â”‚       â””â”€â”€ studyLogger.js        # íŒŒì¼ ë¡œê¹…
â””â”€â”€ public/uploads/               # íŒŒì¼ ì €ì¥ ë””ë ‰í† ë¦¬
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ëª¨ë¸

### File ëª¨ë¸

```prisma
model File {
  id              String     @id @default(cuid())
  studyId         String
  uploaderId      String
  name            String     // ì›ë³¸ íŒŒì¼ëª… (ì •ì œë¨)
  size            Int        // ë°”ì´íŠ¸
  type            String     // MIME íƒ€ì…
  url             String     // /uploads/{studyId}/{filename}
  folderId        String?    // í´ë” ì§€ì› (ë¯¸ì‚¬ìš©)
  downloads       Int        @default(0)
  lastDownloadedAt DateTime?
  createdAt       DateTime   @default(now())
  updatedAt       DateTime   @updatedAt

  study           Study      @relation(fields: [studyId], references: [id], onDelete: Cascade)
  uploader        User       @relation(fields: [uploaderId], references: [id])
}

model FileDownloadLog {
  id        String   @id @default(cuid())
  fileId    String
  userId    String
  studyId   String
  ip        String
  userAgent String
  createdAt DateTime @default(now())
}
```

---

## ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜

| ì¹´í…Œê³ ë¦¬ | í™•ì¥ì | ìµœëŒ€ í¬ê¸° |
|----------|--------|-----------|
| IMAGE | jpg, jpeg, png, gif, webp, svg, bmp, ico, tiff, heic | 10MB |
| DOCUMENT | pdf, doc, docx, xls, xlsx, ppt, pptx, txt, md | 10MB |
| ARCHIVE | zip, rar, 7z, tar, gz | 50MB |
| VIDEO | mp4, avi, mov, wmv, flv, webm | 100MB |
| AUDIO | mp3, wav, ogg, m4a, flac | 20MB |
| CODE | js, jsx, ts, tsx, py, java, cpp, html, css, json | 2MB |

---

## ê´€ë ¨ ë¬¸ì„œ

- [API](./api.md)
- [í™”ë©´](./screens.md)
- [ë³´ì•ˆ](./security.md)
- [ì˜ˆì™¸](./exceptions.md)

