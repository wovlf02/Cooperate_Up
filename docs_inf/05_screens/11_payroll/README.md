# 급여 관리 (Payroll) 화면 설계

> 급여 자동 계산, 명세서 PDF, 엑셀 추출, 지급 관리 화면

## 📁 파일 구조

```
11_payroll/
├── README.md                 # 이 파일
└── payroll-screens.md        # 화면 상세 설계
```

---

## 📱 화면 목록

| 화면 | 파일명 | 권한 | 설명 |
|------|--------|------|------|
| 급여 목록 | PayrollListScreen | 공통 | 월별 급여 목록 |
| 급여 상세 | PayrollDetailScreen | 공통 | 급여 명세서 상세 (산출식 포함) |
| 급여 지급 관리 | PayrollPaymentScreen | 관리자 | 직원별 급여 지급 체크리스트 |

---

## 🎨 화면 플로우

### 사업주 플로우
```
급여 목록 → 직원 선택 → 급여 상세 → PDF 다운로드
    │                        │
    │                        └──→ 엑셀 추출
    │
    └──→ 급여 지급 관리 → 직원별 지급 체크 → 완료
```

### 직원 플로우
```
급여 목록 → 급여 상세 → PDF 다운로드
              │
              └──→ 산출식 확인
```

---

## 💰 급여 계산 규칙

| 항목 | 설명 |
|------|------|
| 근무 시간 | 퇴근 시간 - 출근 시간 (분 단위) |
| 일급 | 근무 시간 × 시급 |
| 월급 | 해당 월 일급 합계 |

### 최저시급 검증 (필수)

| 연도 | 최저시급 |
|------|------|
| 2024년 | 9,860원 |
| 2025년 | 10,030원 |
| 2026년 | 10,320원 (예정) |

#### 최저시급 미만 입력 시
- **알림창 표시**: "현재 최저시급은 {금액}원입니다. 최저시급 이상의 금액을 입력해주세요."
- **입력 제한**: 최저시급 미만 금액은 저장 불가
- **연도별 자동 적용**: 시스템 날짜 기준 해당 연도 최저시급 자동 적용

```
┌─────────────────────────────────────┐
│                                     │
│  ⚠️ 최저시급 미만 입력              │
│                                     │
│  현재 최저시급은 10,030원입니다.    │
│  최저시급 이상의 금액을             │
│  입력해주세요.                      │
│                                     │
│  입력한 금액: 9,500원               │
│  최저시급: 10,030원                 │
│                                     │
│  ┌───────────────────────────────┐  │
│  │            확인              │  │
│  └───────────────────────────────┘  │
│                                     │
└─────────────────────────────────────┘
```

---

## 📊 명세서 구성 (산출식 자동 표시)

| 항목 | 설명 |
|------|------|
| 헤더 | 사업장명, 직원명, 기간 |
| 요약 | 총 근무일, 총 근무시간, 시급, 총 급여 |
| **지급 내역 (산출식)** | 각 항목별 계산식 자동 표시 |
| **공제 내역 (산출식)** | 4대보험, 세금 계산식 표시 |
| 상세 | 일별 출퇴근 시간, 근무시간, 일급 |
| 푸터 | 발급일, 사업장 정보 |

### 산출식 예시
```
💰 지급 내역
─────────────────────────────────────
기본급
  136시간 × 10,030원 = 1,364,080원

주휴수당
  (40시간 ÷ 5일) × 4주 × 10,030원 = 321,920원

연장근로수당
  8시간 × 10,030원 × 1.5 = 120,360원

야간근로수당
  16시간 × 10,030원 × 0.5 = 80,240원
─────────────────────────────────────
지급 합계: 1,886,600원

📉 공제 내역
─────────────────────────────────────
국민연금 (4.5%)
  1,886,600원 × 4.5% = 84,897원

건강보험 (3.545%)
  1,886,600원 × 3.545% = 66,880원

장기요양보험 (건강보험의 12.95%)
  66,880원 × 12.95% = 8,661원

고용보험 (0.9%)
  1,886,600원 × 0.9% = 16,979원

소득세
  간이세액표 적용 = 58,320원

지방소득세 (소득세의 10%)
  58,320원 × 10% = 5,832원
─────────────────────────────────────
공제 합계: 241,569원

💵 실 지급액: 1,645,031원
```

---

## 🔔 급여 지급일 알림 시스템

### 알림 규칙
| 시점 | 대상 | 알림 내용 |
|------|------|----------|
| 급여 지급일 당일 | 관리자 + 직원 전체 | "오늘은 급여가 지급되는 날입니다" 안내 알림창 |
| 급여 지급일 23:30 | 관리자만 | 미지급 직원이 있을 경우 푸시 알림 |

### 급여 지급 체크리스트 (관리자)
```
┌─────────────────────────────────────┐
│ 12월 급여 지급 현황                  │
├─────────────────────────────────────┤
│                                     │
│  지급 완료: 3명 / 전체: 5명          │
│                                     │
│  ☑️ 김철수    1,645,031원  지급완료  │
│              12/10 15:30             │
│                                     │
│  ☑️ 박영희    1,234,560원  지급완료  │
│              12/10 15:32             │
│                                     │
│  ☑️ 이민수      980,450원  지급완료  │
│              12/10 15:35             │
│                                     │
│  ⬜ 최지연    1,456,780원  미지급    │
│                                     │
│  ⬜ 정수현      876,320원  미지급    │
│                                     │
└─────────────────────────────────────┘
```

### 미지급 경고 푸시 알림 (23:30)
```
┌─────────────────────────────────────┐
│ 🔔 급여 미지급 알림                  │
│                                     │
│ 오늘 급여 지급일입니다.              │
│ 아직 2명의 직원에게 급여가           │
│ 지급되지 않았습니다.                 │
│                                     │
│ • 최지연: 1,456,780원               │
│ • 정수현: 876,320원                 │
│                                     │
│ [지급 관리로 이동]                   │
└─────────────────────────────────────┘
```

---

## 📝 관련 문서

- [기능 요구사항](../../02_requirements/functional.md) - FR-14 ~ FR-17
- [Firestore 스키마](../../04_database/firestore-schema.md) - payrolls 컬렉션
- [TODO](../../08_todo/14-payroll.md)
