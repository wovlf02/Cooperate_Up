# 채팅방 목록 화면 (ChatListScreen)

## 개요

사업장 단위의 채팅방 목록을 보여주는 화면입니다.
- **그룹 채팅**: 사업장 전체 직원이 참여하는 단체 채팅방 (사업장당 1개 자동 생성)
- **1:1 채팅**: 관리자와 직원 간의 개별 채팅방

### 채팅 구조
- 채팅은 **사업장 단위**로 운영됩니다.
- 각 사업장에는 **전체 채팅방 1개**가 자동 생성됩니다.
- **관리자(사업주)**는:
  - 전체 채팅방에서 모든 직원과 소통
  - 각 직원과 개별 1:1 채팅 가능
  - 새로운 1:1 채팅방 생성 가능
- **직원**은:
  - 전체 채팅방 참여
  - 관리자와의 1:1 채팅만 가능 (직원 간 1:1 불가)

---

## 채팅 구조

| 채팅 타입 | 설명 | 권한 |
|---------|------|-----|
| 그룹 채팅 | 사업장 전체 직원 참여 (사업장 생성 시 자동 생성) | 모든 멤버 |
| 1:1 채팅 | 관리자-직원 개별 대화 | 관리자: 생성 가능 / 직원: 참여만 |

---

## 레이아웃

```
┌─────────────────────────────────────────┐
│ StatusBar                               │
├─────────────────────────────────────────┤
│ Header                                  │
│ ┌─────────────────────────────────────┐ │
│ │      채팅                      (➕) │ │
│ │      fontSize: fs(18), bold  새채팅 │ │
│ │                           (관리자만)│ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│                                         │
│  Search Bar                             │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │  ┌─────────────────────────────┐    │ │
│ │  │ 🔍 채팅방, 메시지 검색      │    │ │
│ │  │    height: hp(5.5)          │    │ │
│ │  │    backgroundColor: gray100 │    │ │
│ │  │    borderRadius: ms(10)     │    │ │
│ │  └─────────────────────────────┘    │ │
│ │                                     │ │
│ │  paddingHorizontal: wp(4)           │ │
│ │  paddingVertical: hp(1)             │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
│  Chat Room List (FlatList)              │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │  그룹 채팅 (항상 상단 고정)          │ │
│ │  ┌─────────────────────────────┐    │ │
│ │  │ ┌────┐ 전체 채팅      20:45│    │ │
│ │  │ │👥 │ 김사장: 내일 회의... │    │ │
│ │  │ │    │ fontSize: fs(14)    3│    │ │
│ │  │ │그룹│ color: gray500       │    │ │
│ │  │ │아이콘│ 5명 참여           │    │ │
│ │  │ └────┘                      │    │ │
│ │  │                             │    │ │
│ │  │ 시각: 우측 상단 정렬         │    │ │
│ │  │ 읽지않음 수: 시각 아래 정렬  │    │ │
│ │  │ height: hp(9)               │    │ │
│ │  │ borderBottom: gray100       │    │ │
│ │  │ backgroundColor: primary50  │    │ │
│ │  └─────────────────────────────┘    │ │
│ │                                     │ │
│ │  ─────── 1:1 채팅 ───────          │ │
│ │  (관리자: 모든 직원 표시)           │ │
│ │  (직원: 관리자와의 채팅만 표시)     │ │
│ │                                     │ │
│ │  ┌─────────────────────────────┐    │ │
│ │  │ ┌────┐ 김철수          20:30│    │ │
│ │  │ │ 👤 │ 네, 알겠습니다!     │    │ │
│ │  │ │    │                    1 │    │ │
│ │  │ │프로필│                    │    │ │
│ │  │ └────┘                      │    │ │
│ │  │                             │    │ │
│ │  │ 시각: 우측 상단             │    │ │
│ │  │ 안읽음 뱃지: 시각 아래      │    │ │
│ │  └─────────────────────────────┘    │ │
│ │                                     │ │
│ │  ┌─────────────────────────────┐    │ │
│ │  │ ┌────┐ 박영희          19:15│    │ │
│ │  │ │ 👤 │ 사진을 보냈습니다    │    │ │
│ │  │ │    │                      │    │ │
│ │  │ │    │                      │    │ │
│ │  │ └────┘                      │    │ │
│ │  │                             │    │ │
│ │  │ 읽음 (뱃지 없음)            │    │ │
│ │  └─────────────────────────────┘    │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
├─────────────────────────────────────────┤
│ BottomTabBar                            │
└─────────────────────────────────────────┘
```

---

## 새 채팅 모달 (관리자 전용)

```
┌─────────────────────────────────────────┐
│                                         │
│  ┌─────────────────────────────────┐    │
│  │                            ✕   │    │
│  │  새 1:1 채팅 시작              │    │
│  │  fontSize: fs(18), bold        │    │
│  │                                │    │
│  │  ─────────────────────────     │    │
│  │                                │    │
│  │  직원을 선택해주세요           │    │
│  │                                │    │
│  │  ┌───────────────────────┐     │    │
│  │  │ 🔍 직원 검색...       │     │    │
│  │  └───────────────────────┘     │    │
│  │                                │    │
│  │  ┌───────────────────────┐     │    │
│  │  │ 👤 김철수             │     │    │
│  │  │    010-1234-5678      │     │    │
│  │  └───────────────────────┘     │    │
│  │                                │    │
│  │  ┌───────────────────────┐     │    │
│  │  │ 👤 박영희             │     │    │
│  │  │    010-9876-5432      │     │    │
│  │  └───────────────────────┘     │    │
│  │                                │    │
│  │  ※ 기존 채팅방이 있으면       │    │
│  │    해당 채팅방으로 이동        │    │
│  │                                │    │
│  └─────────────────────────────────┘    │
│                                         │
└─────────────────────────────────────────┘
```

---

## 컴포넌트 상세

### SearchBar (검색 바)

```
┌───────────────────────────────────────┐
│                                       │
│  ┌─────────────────────────────────┐  │
│  │ 🔍 채팅방, 메시지 검색          │  │
│  │                                 │  │
│  │ icon: ms(18), gray400           │  │
│  │ placeholder color: gray400      │  │
│  │ fontSize: fs(15)                │  │
│  │                                 │  │
│  │ height: hp(5.5)                 │  │
│  │ backgroundColor: gray100        │  │
│  │ borderRadius: ms(10)            │  │
│  │ paddingHorizontal: wp(3)        │  │
│  └─────────────────────────────────┘  │
│                                       │
│  탭 시 → 검색 화면으로 이동           │
│  또는 인라인 검색 모드 전환           │
│                                       │
└───────────────────────────────────────┘
```

### ChatRoomItem (채팅방 아이템)

```
┌───────────────────────────────────────┐
│                                       │
│  전체 채팅방:                         │
│  ┌─────────────────────────────────┐  │
│  │                                 │  │
│  │  ┌────┐  전체 채팅      20:45  │  │
│  │  │ 👥 │  roomName        time  │  │
│  │  │    │  fs(16), bold  ↗우측상단│  │
│  │  │wp12│                  fs(12)│  │
│  │  │    │                 gray400│  │
│  │  │그룹│  김사장: 내일 회의...  │  │
│  │  │아이콘│ lastMessage    ┌───┐ │  │
│  │  └────┘  fs(14), gray500 │ 3 │ │  │
│  │          numberOfLines:1 │뱃지│ │  │
│  │                         └───┘ │  │
│  │                      ↗시각 아래│  │
│  │                                 │  │
│  │  height: hp(9)                  │  │
│  │  paddingHorizontal: wp(4)       │  │
│  │  borderBottomWidth: ms(1)       │  │
│  │  borderBottomColor: gray100     │  │
│  │                                 │  │
│  └─────────────────────────────────┘  │
│                                       │
│  1:1 채팅방:                          │
│  ┌─────────────────────────────────┐  │
│  │                                 │  │
│  │  ┌────┐  김철수          20:30 │  │
│  │  │ 👤 │  name             time │  │
│  │  │    │                ↗우측상단│  │
│  │  │wp12│                        │  │
│  │  │    │                 ┌───┐  │  │
│  │  │프로필│ 네, 알겠습니다! │ 1 │  │  │
│  │  │사진│  lastMessage    │뱃지│  │  │
│  │  └────┘               └───┘  │  │
│  │                      ↗시각 아래│  │
│  │                                 │  │
│  └─────────────────────────────────┘  │
│                                       │
│  배치 규칙:                            │
│  - 전송 시각: 우측 상단 정렬           │
│  - 읽지 않은 메시지 수: 전송 시각 아래 │
│  - 읽은 경우 뱃지 표시 안함            │
│                                       │
└───────────────────────────────────────┘
```

**안읽음 뱃지:**

```
┌────────┐
│   3    │  minWidth: ms(20)
│        │  height: ms(20)
└────────┘  borderRadius: ms(10)
            backgroundColor: primary
            color: white
            fontSize: fs(12)
            fontWeight: bold

99 초과 시: "99+"
```

---

## 시간 표시 형식

| 조건 | 표시 형식 |
|------|----------|
| 오늘 | HH:mm (예: 20:45) |
| 어제 | 어제 |
| 올해 | MM월 DD일 (예: 12월 20일) |
| 작년 이전 | YYYY.MM.DD (예: 2024.12.20) |

---

## 새 채팅 (관리자 전용)

➕ 버튼 탭 시 → 근무자 선택 화면

```
┌─────────────────────────────────────────┐
│ Header                                  │
│ ┌─────────────────────────────────────┐ │
│ │ ✕   새 채팅                         │ │
│ └─────────────────────────────────────┘ │
├─────────────────────────────────────────┤
│                                         │
│  근무자 목록                            │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │  ┌─────────────────────────────┐    │ │
│ │  │ ┌────┐ 김철수               │    │ │
│ │  │ │ 👤 │ 🟢 근무중            │    │ │
│ │  │ └────┘                      │    │ │
│ │  └─────────────────────────────┘    │ │
│ │                                     │ │
│ │  ┌─────────────────────────────┐    │ │
│ │  │ ┌────┐ 박영희               │    │ │
│ │  │ │ 👤 │ ⚪ 미출근            │    │ │
│ │  │ └────┘                      │    │ │
│ │  └─────────────────────────────┘    │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
```

---

## 상태 관리

```typescript
interface ChatListState {
  chatRooms: ChatRoom[];
  searchQuery: string;
  isLoading: boolean;
}

interface ChatRoom {
  id: string;
  type: 'group' | 'direct';
  name: string;
  profileImage: string | null;
  lastMessage: {
    content: string;
    type: 'text' | 'image' | 'file';
    senderName: string;
    createdAt: Date;
  } | null;
  unreadCount: number;
  participants: string[];
}
```

---

## 권한별 화면

| 역할 | 표시되는 채팅방 |
|------|---------------|
| 근무자 | 전체 채팅방만 |
| 관리자 | 전체 채팅방 + 1:1 채팅방들 |

